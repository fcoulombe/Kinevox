import platform
Import('env')

name = "glfw"
dependencies = []

def SetCFlags(ienv):
    if ienv['PLATFORM'] == "win32":
        ienv.Append(CPPPATH=[env.Dir('#3rdParty/glfw/include')])
    else:
        ienv.ParseConfig('pkg-config --cflags libglfw')

def SetLFlags(ienv):
    if ienv['PLATFORM'] == "win32":
        ienv.Append(LIBS=[env.File('#3rdParty/glfw/lib/'+platform.architecture()[0]+'/GLFWDLL.lib')])
        ienv.AppendUnique(LINKFLAGS=["/SUBSYSTEM:WINDOWS"])
    else:
        ienv.ParseConfig('pkg-config --libs libglfw')
	
dllDep = []
if env['PLATFORM']=="win32":
    dllDep = [env.File("#3rdParty/glfw/bin/"+platform.architecture()[0]+"/GLFW.dll")]
env.AddComponent(name, None, None,None,dependencies, SetCFlags, SetLFlags, dllDep)
