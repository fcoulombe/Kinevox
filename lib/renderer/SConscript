Import('env')

name = "renderer"
incPath = [env.Dir("#/lib/%s" % name)]
dependencies = [ 'gcl', 'sdl', 'opencv', 'opengl', 'libpng']


if  env['PLATFORM']=='posix':
	dependencies.append('glew')
	glewPreProc = ["-DENABLE_GLEW=1"]
elif env['PLATFORM']=='darwin':
	glewPreProc = ["-DENABLE_GLEW=0"]
else:
	print "Platform: %s" % env['PLATFORM'] #leave this here so that we catch new platforms
	glewPreProc = ["-DENABLE_GLEW=0"]
cflags = []
cflags.extend(glewPreProc)

cflags.extend(['-DENABLE_FIX_PIPELINE=1'])


env.AppendUnique(CPPFLAGS=cflags)
env.AppendUnique(CXXFLAGS=cflags)
env.AppendUnique(CFLAGS=cflags)

env.AppendUnique(CPPPATH=incPath)
env.AppendUnique(CXXPATH=incPath)
env.AppendUnique(CPATH=incPath)


src_files = env.Glob("*.cpp")
lib = env.KStaticLibrary(name, src_files, dependencies)
env.AddComponent(name, cflags, incPath, lib, dependencies)

